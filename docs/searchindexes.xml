<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<search>
  
  <entry>
    <title>ä¸€ä¸ªä¸å¸¦æ’ä»¶çš„flaskåº”ç”¨</title>
    <url>https://chaleaoch.com/post/%E4%B8%80%E4%B8%AA%E4%B8%8D%E5%B8%A6%E6%8F%92%E4%BB%B6%E7%9A%84flask%E5%BA%94%E7%94%A8/</url>
    <categories><category>default</category>
    </categories>
    <tags>
      <tag>flask</tag>
      <tag>python</tag>
    </tags>
    <content type="html"><![CDATA[èµ·å›  äº‹æƒ…çš„èµ·å› æ˜¯è¿™æ ·çš„, æ›¾ç»ç»´æŠ¤è¿‡ä¸€ä¸ªåˆ«äººåšçš„ flask é¡¹ç›®,å¼•ç”¨äº†å¤§é‡çš„æ’ä»¶, åœ¨ç»´æŠ¤è¿‡ç¨‹ä¸­éœ€è¦è°ƒæŸ¥æ’ä»¶çš„æºç æ¥è§£å†³é—®é¢˜, å‘ç°æœ‰çš„æ’ä»¶åŠŸèƒ½å¾ˆå•ä¸€,ä½†æ˜¯å´å†™çš„å¾ˆå¤æ‚(å› ä¸ºå¼€æºæ’ä»¶è¦è€ƒè™‘å„ç§å®é™…ä½¿ç”¨åœºæ™¯). æœ‰æ—¶é—´ç²¾åŠ›è¿˜ä¸å¦‚è‡ªå·±å†™ä¸€ä¸ª. æ°å¥½å¾—åˆ°ä¸€ä¸ªä»é›¶å¼€å§‹çš„é¡¹ç›®. å†³å®šå°è¯•åšä¸€ä¸ªé›¶æ’ä»¶çš„ flask é¡¹ç›®. ç›®å‰æ¥çœ‹æ•ˆæœè¿˜ä¸é”™.
éœ€è¦è¯´æ˜çš„æ˜¯: è¿™é‡Œçš„é›¶æ’ä»¶æ˜¯æŒ‡é›¶ flask æ’ä»¶,ä¸æ˜¯ä¸ç”¨ä»»ä½• python æ’ä»¶.
é¡¹ç›®æ„æˆ ä¸€ä¸ªå¾ˆç®€å•çš„ dashboard, ä¸»è¦ç”¨åˆ°å¦‚ä¸‹ç»„ä»¶
1 2 3 4 5 6 7 8 9 10 11 12 13 14 python = &#34;~3.10&#34; Flask = &#34;~2.1.1&#34; python-dotenv = &#34;~0.20.0&#34; pydantic = &#34;~1.9.0&#34; requests = &#34;~2.27.1&#34; peewee = &#34;~3.14.10&#34; arrow = &#34;~1.2.2&#34; psycopg2 = &#34;~2.9.3&#34; wtf-peewee = &#34;~3.0.4&#34; APScheduler = &#34;~3.9.1&#34; redis = &#34;~4.3.3&#34; SQLAlchemy = &#34;~1.4.37&#34; gunicorn = &#34;~20.1.0&#34; Cython = &#34;^0.29.30&#34; å¯èƒ½ç”¨åˆ°çš„ flask æ’ä»¶æ˜¯: flask-redis, flask-sqlalchemy, flask-peewee, flask-pydantic
flask-redis å…ˆè¯´ flask-redis src/extentions.py
1 2 3 4 5 6 7 8 from redis import Redis class FlaskRedis: def __init__(self) -&gt; None: self.client = None def init(self, app): self.client = Redis.from_url(app.config[&#34;REDIS_URL&#34;]) redis_client = FlaskRedis() åªéœ€è¦åœ¨éœ€è¦çš„åœ°æ–¹
1 2 3 4 from extensions import redis_client def get_redis_data(key) -&gt; list[Any] | dict[Any, Any] | None: ret = redis_client.client.get(f&#34;{key}&#34;) æ˜¯ä¸æ˜¯è¶…çº§ç®€å•,å®Œå…¨æ»¡è¶³é¡¹ç›®éœ€è¦. ä¹Ÿä¸éœ€è¦è®°å¿†å¼€æºæ’ä»¶çš„é…ç½®.
flask apscheduler å†è­¬å¦‚ scheduler src/extentioons.py
1 2 3 4 5 6 7 8 9 10 11 12 from apscheduler.schedulers.blocking import BlockingScheduler class FlaskScheduler: def init(self, app): scheduler = BlockingScheduler() scheduler.configure(**app.config[&#34;SCHEDULER_OPTIONS&#34;]) jobs = app.config.get(&#34;SCHEDULER_JOBS&#34;, []) for job in jobs: scheduler.add_job(**job) self.scheduler = scheduler scheduler = FlaskScheduler() å½“ç„¶,è¿™é‡Œéœ€è¦åœ¨ create_app ä¸­ init ä¸€ä¸‹
1 2 3 4 5 def create_app(test_config: dict[str, Any] = None) -&gt; Flask: ... redis_client.init(app) scheduler.init(app) ... scheduler çš„ä½¿ç”¨éœ€è¦é€šè¿‡ flask ä¸­çš„ click é…åˆå®ç°:
/src/cli/scheduler.py
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 from flask.cli import with_appcontext from extensions import scheduler from flask.cli import AppGroup scheduler_cli = AppGroup(&#34;scheduler&#34;) @scheduler_cli.command(&#34;start&#34;) @with_appcontext def start(): scheduler.scheduler.start() @scheduler_cli.command(&#34;stop&#34;) @with_appcontext def stop(): scheduler.scheduler.stop() æ–‡ç« å†™åˆ°è¿™é‡Œ, å‘ç°è¿™ä¸ªé¡¹ç›®è¿˜æœ‰ä¸€ä¸ªæ›¿æ¢flask-migrateçš„å®ç°. ä½†æ˜¯ç°åœ¨å·²ç»æ˜¯æ—©ä¸Š 8 ç‚¹åŠäº†. æˆ‘è¦å»ä¸Šç­äº†. ç­‰æœ‰æ—¶é—´åœ¨ä¸‹ç¯‡æ–‡ç« ä¸­ä»‹ç».
]]></content>
  </entry>
  
  <entry>
    <title>Hello World</title>
    <url>https://chaleaoch.com/post/hello-world/</url>
    <categories>
    </categories>
    <tags>
    </tags>
    <content type="html"><![CDATA[hello world!
]]></content>
  </entry>
  
  <entry>
    <title>Hello World</title>
    <url>https://chaleaoch.com/posts/hello-world/</url>
    <categories>
    </categories>
    <tags>
    </tags>
    <content type="html"><![CDATA[sdl;fkhasdfhaskldjfhaskldjfhaskldjhfaslkdfjhskldjhdfklajsh
]]></content>
  </entry>
  
  <entry>
    <title>å…³äº Hugo NexT ç»„ç»‡</title>
    <url>https://chaleaoch.com/about.html</url>
    <categories>
    </categories>
    <tags>
    </tags>
    <content type="html"><![CDATA[Hugo NexT ç»„ç»‡æ˜¯ç”±ä¼—å¤šå–œçˆ± NexT ä¸»é¢˜åŠé£æ ¼çš„ä¸–ç•Œå„åœ°å‹äººå…±åŒç»„å»ºè€Œæˆï¼Œä¸ºçš„å°±æ˜¯è®©è¿™ä¸ªä¸»é¢˜ç»§ç»­åœ¨ Hugo å¼•æ“ä¸­ä¹Ÿèƒ½å¾—åˆ°å‘æ‰¬å…‰å¤§ï¼Œåœ¨æ­¤ä¹Ÿæ¬¢è¿ä½ çš„åŠ å…¥ï¼
æˆ‘ä»¬çš„æ„¿æ™¯ å»¶ç»­ NexT ç»å…¸çš„é»‘ç™½è°ƒæ­é…ï¼Œä¿æŒç®€å•çš„æ˜“ç”¨æ€§åŠå¼ºå¤§çš„åŠŸèƒ½ã€‚
ä½¿ç”¨åé¦ˆ åŠ å…¥ GitHub Discussions æˆ– Gitter åœ¨çº¿è®¨è®º ğŸ» GitHub Issues æäº¤é”™è¯¯æŠ¥å‘Š ğŸ› GitHub Feature è¡¨æ–°åŠŸèƒ½çš„æƒ³æ³• âœ¨ åŒæ—¶å›½å†…ç”¨æˆ·ä¹Ÿå¯åŠ å…¥ QQ ç¾¤äº¤æµï¼š 604710815
]]></content>
  </entry>
  
  <entry>
    <title>ç«™ç‚¹ç¤ºä¾‹</title>
    <url>https://chaleaoch.com/flinks.html</url>
    <categories>
    </categories>
    <tags>
    </tags>
    <content type="html"><![CDATA[å¦‚æƒ³è¦äº¤æ¢å‹æƒ…é“¾æ¥ï¼Œè¯·åœ¨è¯„è®ºåŒºç•™ä¸‹ä½ çš„ç«™ç‚¹ä¿¡æ¯ï¼Œæ ¼å¼å‚è€ƒå¦‚ä¸‹ï¼š
åç§°ï¼š NexT ä¸»é¢˜ è¯´æ˜ï¼š ä¿æŒç®€å•çš„æ˜“ç”¨æ€§å’Œå¼ºå¤§çš„åŠŸèƒ½ã€‚ ç«™æ ‡ï¼š https://hugo-next.eu.org/imgs/hugo_next_avatar.png ç½‘å€ï¼š https://hugo-next.eu.org ]]></content>
  </entry>
  
</search>